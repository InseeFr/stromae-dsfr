/*! For license information please see table.module.js.LICENSE.txt */
const config={prefix:"fr",namespace:"dsfr",organisation:"@gouvfr",version:"1.12.1"},api=window[config.namespace],TableEmission={SCROLLABLE:api.internals.ns.emission("table","scrollable"),CHANGE:api.internals.ns.emission("table","change"),CAPTION_HEIGHT:api.internals.ns.emission("table","captionheight"),CAPTION_WIDTH:api.internals.ns.emission("table","captionwidth")};class Table extends api.core.Instance{static get instanceClassName(){return"Table"}init(){this.addAscent(TableEmission.CAPTION_HEIGHT,this.setCaptionHeight.bind(this))}setCaptionHeight(e){this.setProperty("--table-offset",e)}}class TableWrapper extends api.core.Instance{static get instanceClassName(){return"TableWrapper"}init(){this.addAscent(TableEmission.CAPTION_HEIGHT,this.setCaptionHeight.bind(this))}setCaptionHeight(e){requestAnimationFrame((()=>this.ascend(TableEmission.CAPTION_HEIGHT,0))),this.setProperty("--table-offset",e)}}const TableSelector={TABLE:api.internals.ns.selector("table"),TABLE_WRAPPER:[`${api.internals.ns.selector("table")} ${api.internals.ns.selector("table__wrapper")}`],SHADOW:api.internals.ns.selector("table__shadow"),SHADOW_LEFT:api.internals.ns.selector("table__shadow--left"),SHADOW_RIGHT:api.internals.ns.selector("table__shadow--right"),ELEMENT:[`${api.internals.ns.selector("table")}:not(${api.internals.ns.selector("table--no-scroll")}) table`],CAPTION:`${api.internals.ns.selector("table")} table caption`,ROW:`${api.internals.ns.selector("table")} tbody tr`,COL:`${api.internals.ns.selector("table")} thead th`},SCROLL_OFFSET=0;class TableElement extends api.core.Instance{static get instanceClassName(){return"TableElement"}init(){this.listen("scroll",this.scroll.bind(this)),this.content=this.querySelector("tbody"),this.tableOffsetHeight=0,this.isResizing=!0}get isScrolling(){return this._isScrolling}set isScrolling(e){this._isScrolling!==e&&(this._isScrolling=e,e?(this.addClass(TableSelector.SHADOW),this.scroll()):(this.removeClass(TableSelector.SHADOW),this.removeClass(TableSelector.SHADOW_LEFT),this.removeClass(TableSelector.SHADOW_RIGHT)))}scroll(){const e=this.node.scrollLeft<=0,t=this.content.offsetWidth-this.node.offsetWidth-0,s=Math.abs(this.node.scrollLeft)>=t,i="rtl"===document.documentElement.getAttribute("dir"),a=i?TableSelector.SHADOW_RIGHT:TableSelector.SHADOW_LEFT,l=i?TableSelector.SHADOW_LEFT:TableSelector.SHADOW_RIGHT;e?this.removeClass(a):this.addClass(a),s?this.removeClass(l):this.addClass(l)}resize(){this.isScrolling=this.content.offsetWidth>this.node.offsetWidth}dispose(){this.isScrolling=!1}}const PADDING="1rem";class TableCaption extends api.core.Instance{static get instanceClassName(){return"TableCaption"}init(){this.height=0,this.isResizing=!0}resize(){const e=this.getRect().height;this.height!==e&&(this.height=e,this.ascend(TableEmission.CAPTION_HEIGHT,`calc(${e}px + 1rem)`))}}const CheckboxEmission={CHANGE:api.internals.ns.emission("checkbox","change"),RETRIEVE:api.internals.ns.emission("checkbox","retrieve")};class TableRow extends api.core.Instance{static get instanceClassName(){return"TableRow"}init(){api.checkbox&&(this.addAscent(CheckboxEmission.CHANGE,this._handleCheckboxChange.bind(this)),this.descend(CheckboxEmission.RETRIEVE))}_handleCheckboxChange(e){"row-select"===e.name&&(this.isSelected=!0===e.checked)}render(){const e=this.getRect().height+2;this._height!==e&&(this._height=e,this.setProperty("--row-height",`${this._height}px`))}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected!==e&&(this.isRendering=e,this._isSelected=e,this.setAttribute("aria-selected",e))}}api.table={Table:Table,TableWrapper:TableWrapper,TableElement:TableElement,TableCaption:TableCaption,TableSelector:TableSelector,TableRow:TableRow},api.internals.register(api.table.TableSelector.TABLE,api.table.Table),api.internals.register(api.table.TableSelector.TABLE_WRAPPER,api.table.TableWrapper),api.internals.register(api.table.TableSelector.ELEMENT,api.table.TableElement),api.internals.register(api.table.TableSelector.CAPTION,api.table.TableCaption),api.internals.register(api.table.TableSelector.ROW,api.table.TableRow);