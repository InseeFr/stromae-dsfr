/*! For license information please see breadcrumb.module.js.LICENSE.txt */
const config={prefix:"fr",namespace:"dsfr",organisation:"@gouvfr",version:"1.12.1"},api=window[config.namespace],BreadcrumbSelector={BREADCRUMB:api.internals.ns.selector("breadcrumb"),BUTTON:api.internals.ns.selector("breadcrumb__button")};class Breadcrumb extends api.core.Instance{constructor(){super(),this.count=0,this.focusing=this.focus.bind(this)}static get instanceClassName(){return"Breadcrumb"}init(){this.getCollapse(),this.isResizing=!0}get proxy(){const e=this;return Object.assign(super.proxy,{focus:e.focus.bind(e),disclose:e.collapse.disclose.bind(e.collapse)})}getCollapse(){const e=this.collapse;e?e.listen(api.core.DisclosureEvent.DISCLOSE,this.focusing):this.addAscent(api.core.DisclosureEmission.ADDED,this.getCollapse.bind(this))}resize(){const e=this.collapse,s=this.links;e&&s.length&&(this.isBreakpoint(api.core.Breakpoints.MD)?e.buttonHasFocus&&s[0].focus():s.indexOf(document.activeElement)>-1&&e.focus())}get links(){return[...this.querySelectorAll("a[href]")]}get collapse(){return this.element.getDescendantInstances(api.core.Collapse.instanceClassName,null,!0)[0]}focus(){this.count=0,this._focus()}_focus(){const e=this.links[0];e&&(e.focus(),this.request(this.verify.bind(this)))}verify(){if(this.count++,this.count>100)return;const e=this.links[0];e&&document.activeElement!==e&&this._focus()}get collapsePrimary(){return this.element.children.map((e=>e.getInstance("CollapseButton"))).filter((e=>null!==e&&e.hasClass(BreadcrumbSelector.BUTTON)))[0]}}api.breadcrumb={BreadcrumbSelector:BreadcrumbSelector,Breadcrumb:Breadcrumb},api.internals.register(api.breadcrumb.BreadcrumbSelector.BREADCRUMB,api.breadcrumb.Breadcrumb);