/*! For license information please see header.module.js.LICENSE.txt */
const config={prefix:"fr",namespace:"dsfr",organisation:"@gouvfr",version:"1.12.1"},api=window[config.namespace],HeaderSelector={HEADER:api.internals.ns.selector("header"),TOOLS_LINKS:api.internals.ns.selector("header__tools-links"),MENU_LINKS:api.internals.ns.selector("header__menu-links"),BUTTONS:`${api.internals.ns.selector("header__tools-links")} ${api.internals.ns.selector("btns-group")}, ${api.internals.ns.selector("header__tools-links")} ${api.internals.ns.selector("links-group")}`,MODALS:`${api.internals.ns.selector("header__search")}${api.internals.ns.selector("modal")}, ${api.internals.ns.selector("header__menu")}${api.internals.ns.selector("modal")}`};class HeaderLinks extends api.core.Instance{static get instanceClassName(){return"HeaderLinks"}init(){const e=this.queryParentSelector(HeaderSelector.HEADER);this.toolsLinks=e.querySelector(HeaderSelector.TOOLS_LINKS),this.menuLinks=e.querySelector(HeaderSelector.MENU_LINKS);const a="-mobile",t=this.toolsLinks.innerHTML.replace(/  +/g," "),s=this.menuLinks.innerHTML.replace(/  +/g," ");let n=t.match(/id="(.*?)"/gm)||[];n=n.map((e=>e.replace('id="',"").replace('"',"")));const i=t.match(/aria-controls="(.*?)"/gm);let r=t.replace(/id="(.*?)"/gm,'id="$1'+a+'"');if(i)for(const o of i){const e=o.replace('aria-controls="',"").replace('"',"");n.includes(e)&&(r=r.replace(`aria-controls="${e}"`,`aria-controls="${e+a}"`))}if(r!==s)switch(api.mode){case api.Modes.ANGULAR:case api.Modes.REACT:case api.Modes.VUE:this.warn(`header__tools-links content is different from header__menu-links content.\nAs you're using a dynamic framework, you should handle duplication of this content yourself, please refer to documentation:\n${api.header.doc}`);break;default:this.menuLinks.innerHTML=r}}}class HeaderModal extends api.core.Instance{static get instanceClassName(){return"HeaderModal"}init(){this.isResizing=!0}resize(){this.isBreakpoint(api.core.Breakpoints.LG)?this.deactivateModal():this.activateModal()}activateModal(){const e=this.element.getInstance("Modal");e&&(e.isEnabled=!0,this.listenClick({capture:!0}))}deactivateModal(){const e=this.element.getInstance("Modal");e&&(e.conceal(),e.isEnabled=!1,this.unlistenClick({capture:!0}))}handleClick(e){if(e.target.matches("a, button")&&!e.target.matches("[aria-controls]")&&!e.target.matches(api.core.DisclosureSelector.PREVENT_CONCEAL)){this.element.getInstance("Modal").conceal()}}}api.header={HeaderLinks:HeaderLinks,HeaderModal:HeaderModal,HeaderSelector:HeaderSelector,doc:"https://www.systeme-de-design.gouv.fr/elements-d-interface/composants/en-tete"},api.internals.register(api.header.HeaderSelector.TOOLS_LINKS,api.header.HeaderLinks),api.internals.register(api.header.HeaderSelector.MODALS,api.header.HeaderModal);