/*! For license information please see tooltip.module.js.LICENSE.txt */
const config={prefix:"fr",namespace:"dsfr",organisation:"@gouvfr",version:"1.12.1"},api=window[config.namespace],TooltipSelector={TOOLTIP:api.internals.ns.selector("tooltip"),SHOWN:api.internals.ns.selector("tooltip--shown"),BUTTON:api.internals.ns.selector("btn--tooltip")},TooltipReferentState={FOCUS:1,HOVER:2};class TooltipReferent extends api.core.PlacementReferent{constructor(){super(),this._state=0}static get instanceClassName(){return"TooltipReferent"}init(){if(super.init(),this.listen("focusin",this.focusIn.bind(this)),this.listen("focusout",this.focusOut.bind(this)),!this.matches(TooltipSelector.BUTTON)){const t=this.mouseover.bind(this);this.listen("mouseover",t),this.placement.listen("mouseover",t);const e=this.mouseout.bind(this);this.listen("mouseout",e),this.placement.listen("mouseout",e)}this.addEmission(api.core.RootEmission.KEYDOWN,this._keydown.bind(this)),this.listen("click",this._click.bind(this)),this.addEmission(api.core.RootEmission.CLICK,this._clickOut.bind(this))}_click(){this.focus()}_clickOut(t){this.node.contains(t)||this.blur()}_keydown(t){if(t===api.core.KeyCodes.ESCAPE)this.blur(),this.close()}close(){this.state=0}get state(){return this._state}set state(t){this._state!==t&&(this.isShown=t>0,this._state=t)}focusIn(){this.state|=TooltipReferentState.FOCUS}focusOut(){this.state&=~TooltipReferentState.FOCUS}mouseover(){this.state|=TooltipReferentState.HOVER}mouseout(){this.state&=~TooltipReferentState.HOVER}}const ns=t=>`${config.prefix}-${t}`;ns.selector=(t,e)=>(void 0===e&&(e="."),`${e}${ns(t)}`),(ns.attr=t=>`data-${ns(t)}`).selector=(t,e)=>{let i=ns.attr(t);return void 0!==e&&(i+=`="${e}"`),`[${i}]`},ns.event=t=>`${config.namespace}.${t}`,ns.emission=(t,e)=>`emission:${t}.${e}`;const TooltipEvent={SHOW:ns.event("show"),HIDE:ns.event("hide")},TooltipState={HIDDEN:"hidden",SHOWN:"shown",HIDING:"hiding"};class Tooltip extends api.core.Placement{constructor(){super(api.core.PlacementMode.AUTO,[api.core.PlacementPosition.TOP,api.core.PlacementPosition.BOTTOM],[api.core.PlacementAlign.CENTER,api.core.PlacementAlign.START,api.core.PlacementAlign.END]),this.modifier="",this._state=TooltipState.HIDDEN}static get instanceClassName(){return"Tooltip"}init(){super.init(),this.register(`[aria-describedby="${this.id}"]`,TooltipReferent),this.listen("transitionend",this.transitionEnd.bind(this))}transitionEnd(){this._state===TooltipState.HIDING&&(this._state=TooltipState.HIDDEN,this.isShown=!1)}get isShown(){return super.isShown}set isShown(t){if(this.isEnabled)switch(!0){case t:this._state=TooltipState.SHOWN,this.addClass(TooltipSelector.SHOWN),this.dispatch(TooltipEvent.SHOW),super.isShown=!0;break;case this.isShown&&!t&&this._state===TooltipState.SHOWN:this._state=TooltipState.HIDING,this.removeClass(TooltipSelector.SHOWN);break;case this.isShown&&!t&&this._state===TooltipState.HIDDEN:this.dispatch(TooltipEvent.HIDE),super.isShown=!1}}render(){super.render();let t=this.referentRect.center-this.rect.center;const e=.5*this.rect.width-8;t<-e&&(t=-e),t>e&&(t=e),this.setProperty("--arrow-x",`${t.toFixed(2)}px`)}}api.tooltip={Tooltip:Tooltip,TooltipSelector:TooltipSelector,TooltipEvent:TooltipEvent},api.internals.register(api.tooltip.TooltipSelector.TOOLTIP,api.tooltip.Tooltip);